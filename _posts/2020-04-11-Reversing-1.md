---
title: "How to Reversing?"
date: 2020-04-11 16:30:00 +0900
categories: Yaki Reversing
---

# Reverse Engineering Summary

- [참고] 아주 오랜시간 학습을 해야 함
- 하다보면 됨

***

### 개요

- 리버스 엔지니어링(RE) / 리버스 코드 엔지니어링(RCE)
    - 역분석, 역공학
    - 기술적 원리를 구조 분석을 통해서 분석하는 과정
    - 리버스 코드 엔지니어링 : 소프트웨어 분야의 리버스 엔지니어링
- 목표 및 활용 분야
    - 운영체제 바이너리 분석 (운영체제 구조 이해)
        - 운영체제를 사용하는 개념 지식 향상
        - 시스템 이해 증가 => 시스템 운영 방식 증가
    - 소프트웨어 디버깅
        - 내부 구조 분석, 암호화 알고리즘 분석, 보안 평가
        - 개발 단계에서는 문제가 없지만 프로그램이 죽는 경우를 해결
    - 핫 픽스
        - 버그 패치, 기능 개선
        - 프로그램은 있지만 코드가 없을 때, 기능을 개선해야 할 때 사용
    - 악성코드 분석
        - 다양한 악성코드 분석 => 전용 백신 제작
        - 프로그램을 디버깅/분석 후 악성코드인지를 증명하기 위한 분석
        - 악성코드의 고유 시그니쳐나 행동 패턴을 분석해서 전용 백신을 제작할 수 있음
        - 예) 렌섬웨어 => 분석 => 암호화 알고리즘 분석 => 복호화
        - [참고] 백신도 악성코드처럼 운용하는 경우가 있음
    - 시스템 해킹
        - 소프트웨어 취약점 분석, 버그 헌팅, 공격 코드 작성
        - White Hacker의 기본 소양
        - 소프트웨어가 가진 취약점이 있으면 해당 취약점을 분석
        - 메모리 커럽션과 같은 것을 이해하고 공격하기 위해서 필요
    - 게임 핵, 시리얼 키젠
    - 포렌식
- 로컬의 프로그램은 대부분 메모리상의 데이터를 기반으로 작동
    - 서버 - 클라이언트 구조에서 서버사이트에서 검증이 있으면 어려움

***

### 프로그래밍 언어

- C계열 : C, C++, MFC, C# ...
    - 코드가 없이 분석(불--편)
    - 디컴파일이 불가능(C와 어셈블리의 관계를 알면 이해)
    - 어셈블리어 지식 필요
    - 언어별로 분석 방법이 다름
    - 언어 지식이 없어도 분석 가능
    - 분석에 다른 지식이 필요
- Script Language : Java, Perl, Python, Ruby
    - 디컴파일러가 있음
    - 기계어 코드를 소스코드로 바꿀 수 있음
    - 프로그램이 언어 자체가 분석 지식과 유사
- Javascript, php

***

### 디스어셈블러(Disassembler) / 디버거(Debugger)
- OllyDbg
- WinDbg(Windows Dbg)
- GDB(User Kernel Dbg)
- IDA
- Immunity Debugger(취약점 분석)
- x64_dbg
  ...

***

### OllyDbg

| 단축키        | 요약                 | 설명                                                      |
| ------------- | -------------------- | --------------------------------------------------------- |
| [F9]          | Run                  | 프로그램 실행                                             |
| [Ctrl] + [F2] | Restart              | 프로그램 디버깅 재시작                                    |
| [F7]          | Step Into            | 한 줄의 명령 실행<br />함수나 반복의 경우 내부로 진입     |
| [F8]          | Step Over            | 한 줄의 명령 실행<br />함수나 반복의 경우 일괄 실행       |
| [F2]          | Break Point          | [F9]를 눌러서 Run을 시키면 Break Point가 걸린 곳에서 멈춤 |
| [Shift] + 8   | Move to Now          | 현재 수행해야 하는 위치로 이동                            |
| [ - ]         | Move to Before Point | 이전 위치로 이동                                          |
| [ + ]         | Move to After Point  | 다음 위치로 이동                                          |
| [Enter]       | Move to Point        | 분기 또는 함수의 경우 해당 위치 혹은 함수 내부로 이동     |
| [ ; ]         | Comment              | 해당 위치에 대한 주석 입력                                |
| [Space]       | Modify Code          | 코드 수정                                                 |


***

### 기계어

- OPcode (연산자) 명령어
- Operand 인자

***

### 함수 호출 규약 (Function Calling Convention)

***

### 빌드 환경에 따른 코드 변화 (Build Environment)

***

### C언어 코드 컴파일 패턴

***

### C++언어 코드 컴파일 패턴

***

### MFC 코드 컴파일 패턴

***

### 기타 스크립트 언어 분석

***

### Win32 API

***

### 프로그램 분석 샘플
- 크랙미/키젠미/워게임/해킹 방어대회/ 상용 프로그램 우회